<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é€ä½ ä¸€æœµå°çº¢èŠ±</title>
    <style>
        :root {
            --primary-color: #ff6b81;
            --secondary-color: #d45d8a;
            --text-color: #333;
            --bg-color: #fff9f9;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            transition: background-color 0.5s;
        }
        
        .card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(255, 107, 129, 0.2);
            width: 100%;
            max-width: 400px;
            padding: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
            transform: translateY(0);
            transition: transform 0.3s, box-shadow 0.3s;
            animation: float 3s ease-in-out infinite;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(255, 107, 129, 0.3);
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .title {
            color: var(--primary-color);
            font-size: 24px;
            margin-bottom: 15px;
            font-weight: bold;
        }
        
        .description {
            color: var(--text-color);
            font-size: 16px;
            margin-bottom: 25px;
            line-height: 1.5;
        }
        
        .flower-container {
            height: 300px;
            position: relative;
            margin: 20px 0;
        }
        
        .flower {
            font-size: 80px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: translate(-50%, -50%) scale(1); }
            50% { transform: translate(-50%, -50%) scale(1.1); }
        }
        
        .petal {
            position: absolute;
            background-color: var(--secondary-color);
            border-radius: 50%;
            opacity: 0.6;
            animation: falling linear infinite;
        }
        
        @keyframes falling {
            to { transform: translateY(100vh) rotate(360deg); }
        }
        
        .message {
            background-color: rgba(255, 235, 238, 0.7);
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            font-style: italic;
            position: relative;
        }
        
        .message:before {
            content: '"';
            font-size: 50px;
            color: var(--primary-color);
            opacity: 0.3;
            position: absolute;
            top: -10px;
            left: 5px;
        }
        
        .message:after {
            content: '"';
            font-size: 50px;
            color: var(--primary-color);
            opacity: 0.3;
            position: absolute;
            bottom: -30px;
            right: 5px;
        }
        
        .btn {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 50px;
            margin: 30px auto;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 18px;
            font-weight: bold;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
            z-index: 1;
        }
        
        .btn:after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--secondary-color);
            z-index: -1;
            transform: scale(0);
            transition: transform 0.3s ease;
            border-radius: 50px;
        }
        
        .btn:hover:after {
            transform: scale(1);
        }
        
        .btn:hover {
            transform: scale(1.05);
        }
        
        .hidden {
            display: none;
        }
        
        .input-container {
            margin-bottom: 20px;
        }
        
        input {
            padding: 10px;
            border: 2px solid var(--primary-color);
            border-radius: 50px;
            width: 80%;
            text-align: center;
            font-size: 16px;
        }
        
        .loading {
            font-size: 18px;
            margin: 20px 0;
        }
        
        .loading:after {
            content: '...';
            animation: dots 1.5s steps(5, end) infinite;
        }
        
        @keyframes dots {
            0%, 20% { content: '.'; }
            40% { content: '..'; }
            60%, 100% { content: '...'; }
        }
    </style>
</head>
<body>
    <div class="card" id="questionCard">
        <div class="title">é€ä½ ä¸€æœµå°çº¢èŠ±</div>
        <div class="description">å¼€åœ¨ä½ å¿ƒåº•æœ€æ·±çš„æ³¥æ²™</div>
        <div class="input-container">
            <input type="text" id="userInput" placeholder="äº²çˆ±çš„ï¼Œè¯·è¯´å‡ºä½ çš„åå­—">
        </div>
        <button class="btn" onclick="generateFlowerCard()">ç”Ÿæˆæˆ‘çš„èŠ±å¡</button>
    </div>
    
    <div class="card hidden" id="flowerCard">
        <div class="title" id="cardTitle">æ˜¥æ—¥å°ç¡®å¹¸</div>
        <div class="description" id="cardDescription">é€ä½ ä¸€æœµå°çº¢èŠ±</div>
        <div class="flower-container">
            <div class="flower" id="flowerEmoji">ğŸŒ¹</div>
            <img id="specialPhoto" class="hidden" src="" alt="Special Photo" style="width: 100%; height: 100%; object-fit: contain; border-radius: 10px;">
        </div>
        <div class="message" id="blessingMessage">
            æ„¿ä½ æ¯ä¸€å¤©éƒ½å¦‚èŠ±èˆ¬ç»½æ”¾ï¼Œç”Ÿæ´»å……æ»¡å°ç¡®å¹¸ï¼
        </div>
        <button class="btn" onclick="resetCard()">å†é€ä¸€æœµ</button>
    </div>

    <script>
        const flowers = [
            { emoji: "ğŸŒ¹", name: "çº¢ç«ç‘°", color1: "#ff6b81", color2: "#ff8e9e", keywords: ["çˆ±", "çƒ­æƒ…", "æµªæ¼«"] },
            { emoji: "ğŸŒ»", name: "å‘æ—¥è‘µ", color1: "#ffd700", color2: "#ffdf80", keywords: ["é˜³å…‰", "å¸Œæœ›", "ç§¯æ"] },
            { emoji: "ğŸŒ¸", name: "æ¨±èŠ±", color1: "#ffb6c1", color2: "#ffd1dc", keywords: ["æ¸©æŸ”", "ç¾å¥½", "æ˜¥å¤©"] },
            { emoji: "ğŸŒ¼", name: "å°é›èŠ", color1: "#ffffff", color2: "#fffacd", keywords: ["çº¯æ´", "å¤©çœŸ", "ç®€å•"] },
            { emoji: "ğŸµï¸", name: "ç‰¡ä¸¹", color1: "#ff1493", color2: "#ff69b4", keywords: ["å¯Œè´µ", "åä¸½", "ç¹è£"] },
            { emoji: "ğŸ’®", name: "ç™¾åˆ", color1: "#ffffff", color2: "#f8f8ff", keywords: ["çº¯æ´", "é«˜è´µ", "ç¥ç¦"] }
        ];
        
        const blessings = [
            "ç”Ÿæ´»å°±åƒè¿™æŸèŠ±ï¼Œæ€»æœ‰ç»½æ”¾çš„æ—¶åˆ»ï¼",
            "ä»Šå¤©çš„ä½ ï¼Œå€¼å¾—æ‰€æœ‰ç¾å¥½ï¼",
            "å¯¹è‡ªå·±å¥½ä¸€ç‚¹ï¼Œä½ é…å¾—ä¸Šä¸–é—´æ‰€æœ‰æ¸©æŸ”~",
            "ä¿æŒå¾®ç¬‘ï¼ŒåƒèŠ±å„¿ä¸€æ ·å‘é˜³ç”Ÿé•¿ï¼",
            "å¶å°”åœä¸€åœï¼Œé—»é—»ç”Ÿæ´»çš„èŠ³é¦™~",
            "ä½ æœ¬èº«å°±æ˜¯ä¸€é“ç¾ä¸½çš„é£æ™¯ï¼"
        ];
        
        const titles = [
            "èŠ±å¼€æœ‰æ—¶",
            "å°æ˜¥æ—¥å’Œ",
            "å¿ƒèŠ±æ€’æ”¾",
            "æ˜¥èŠ±ç»½æ”¾",
            "èŠ±é¦™æ»¡å¾„",
            "å‘é˜³è€Œç”Ÿ"
        ];
        
        function generateFlowerCard() {
            const userInput = document.getElementById('userInput').value;
            
            // å…³é”®è¯æ£€æµ‹
            const specialKeywords = {
                "ä¸æ¶›æœ‰å…³": {
                    "æ¶›æ¶›": { flowerIndex: 5, blessingIndex: 2, showPhoto: true, photoPath: "special_photo.jpg" },
                    "é’Ÿæ¶›": { flowerIndex: 1, blessingIndex: 3, showPhoto: true, photoPath: "special_photo.jpg" },
                    "æ¶›å„¿": { flowerIndex: 2, blessingIndex: 5, showPhoto: true, photoPath: "special_photo.jpg" },
                    "æ¶›å­": { flowerIndex: 3, blessingIndex: 1, showPhoto: true, photoPath: "images/special_photo.jpg" },
                    "å®": { flowerIndex: 4, blessingIndex: 4, showPhoto: true, photoPath: "images/special_photo.jpg" },
                    "å®è´": { flowerIndex: 1, blessingIndex: 0, showPhoto: true, photoPath: "images/special_photo.jpg" },
                    "äº²çˆ±çš„": { flowerIndex: 0, blessingIndex: 5, showPhoto: true, photoPath: "images/special_photo.jpg" },
                    "æƒ³è§ä½ ": { flowerIndex: 0, blessingIndex: 5, showPhoto: true, photoPath: "images/special_photo.jpg" }
                },
                "é˜¿å¨‡ä¸“å±": {
                    "é˜¿å¨‡": { flowerIndex: 3, blessingIndex: 1, showPhoto: true, photoPath: "images/special_photo1.jpg" },
                    "å¨‡": { flowerIndex: 4, blessingIndex: 4, showPhoto: true, photoPath: "images/special_photo1.jpg" },
                    "å¨‡å¨‡": { flowerIndex: 1, blessingIndex: 0, showPhoto: true, photoPath: "images/special_photo1.jpg" },
                    "éƒ‘å¨‡": { flowerIndex: 0, blessingIndex: 5, showPhoto: true, photoPath: "images/special_photo1.jpg" },
        
                },
                "è´Ÿé¢è¯æ±‡": {
                    "æ¨ä½ ": { flowerIndex: 0, blessingIndex: 0, showPhoto: false, photoPath: "" },
                    "SB": { flowerIndex: 0, blessingIndex: 0, showPhoto: false, photoPath: "" },
                    "å‚»å­": { flowerIndex: 0, blessingIndex: 0, showPhoto: false, photoPath: "" },
                    "æ»š": { flowerIndex: 0, blessingIndex: 0, showPhoto: false, photoPath: "" },
                    "ç¬¨è›‹": { flowerIndex: 0, blessingIndex: 0, showPhoto: false, photoPath: "" },
                    "å‚»ç“œ": { flowerIndex: 0, blessingIndex: 0, showPhoto: false, photoPath: "" },
                    "å‚»â…©": { flowerIndex: 0, blessingIndex: 0, showPhoto: false, photoPath: "" },
                    "sb": { flowerIndex: 0, blessingIndex: 0, showPhoto: false, photoPath: "" },
                    "å‚»é€¼": { flowerIndex: 0, blessingIndex: 0, showPhoto: false, photoPath: "" },
                    "è®¨åŒ": { flowerIndex: 0, blessingIndex: 0, showPhoto: false, photoPath: "" },
                },

            };
            
            let selectedFlower, selectedBlessing, selectedTitle;
            
            let keywordCategory = null;
            for (const category in specialKeywords) {
                if (userInput in specialKeywords[category]) {
                    keywordCategory = category;
                    const { flowerIndex, blessingIndex, customMessage } = specialKeywords[category][userInput];
                    selectedFlower = flowers[flowerIndex];
                    selectedBlessing = customMessage || blessings[blessingIndex];
                    selectedTitle = titles[flowerIndex];
                    break;
                }
            }
            
            if (!keywordCategory) {
                selectedFlower = flowers[Math.floor(Math.random() * flowers.length)];
                selectedBlessing = blessings[Math.floor(Math.random() * blessings.length)];
                selectedTitle = titles[Math.floor(Math.random() * titles.length)];
            }
            
            const randomFlower = selectedFlower;
            const randomBlessing = selectedBlessing;
            const randomTitle = selectedTitle;
            
            // æ ¹æ®èŠ±æœµç±»å‹è®¾ç½®é¢œè‰²
            document.documentElement.style.setProperty('--primary-color', randomFlower.color1);
            document.documentElement.style.setProperty('--secondary-color', randomFlower.color2);
            
            // æ›´æ–°å¡ç‰‡å†…å®¹
            if (keywordCategory && specialKeywords[keywordCategory][userInput].showPhoto) {
                document.getElementById('flowerEmoji').classList.add('hidden');
                document.getElementById('specialPhoto').classList.remove('hidden');
                document.getElementById('specialPhoto').src = specialKeywords[keywordCategory][userInput].photoPath;
                // ç¡®ä¿ç…§ç‰‡åœ¨å®¹å™¨ä¸­æ­£ç¡®æ˜¾ç¤º
                const flowerContainer = document.querySelector('.flower-container');
                const flowerEmoji = document.getElementById('flowerEmoji');
                const specialPhoto = document.getElementById('specialPhoto');
                if (!flowerContainer.contains(specialPhoto)) {
                    flowerContainer.appendChild(specialPhoto);
                }
            } else {
                document.getElementById('flowerEmoji').classList.remove('hidden');
                document.getElementById('specialPhoto').classList.add('hidden');
                document.getElementById('flowerEmoji').textContent = randomFlower.emoji;
            }
            document.getElementById('blessingMessage').textContent = randomBlessing;
            document.getElementById('cardTitle').textContent = randomTitle;
            
            // æ ¹æ®ç”¨æˆ·è¾“å…¥è°ƒæ•´æè¿°
            let description = "é€ä½ ä¸€æŸ" + randomFlower.name;
            if(userInput) {
                if (keywordCategory) {
                    if (keywordCategory === 'ä¸æ¶›æœ‰å…³') {
                        description = `
                            <div style="text-align: center;">
                                <div>ç¡®è®¤è¿‡çœ¼ç¥ï¼Œæˆ‘ä»¬æ˜¯åŒå‘å¥”èµ´çš„äººï¼</div>
                                <div>åŸæ¥æ§èŠ±çš„æˆ‘ç››è£…å‡ºå¸­ï¼Œåªä¸ºäº²æ‰‹é€ğŸŒ¹ç»™ä½ </div>
                                <div>äº²çˆ±çš„æœ‹å‹ï¼Œæˆ‘è¦å¤§å£°å‘Šè¯‰ä½ </div>
                            </div>
                        `;
                    } else if (keywordCategory === 'é˜¿å¨‡ä¸“å±') {
                        description = `
                            <div style="text-align: center;">
                                <div>äº²çˆ±çš„é˜¿å¨‡ï¼Œæˆ‘æ²¡æœ‰å¯ä»¥é€ä½ çš„ğŸŒ¹</div>
                                <div>å› ä¸ºæ»¡å±±çš„é²œèŠ±ï¼Œéƒ½ä¸åŠä½ å¥½çœ‹</div>
                                <div>ä½†æ˜¯ï¼Œæˆ‘æƒ³å¤§å£°å‘Šè¯‰ä½ </div>
                            </div>
                       `;
                    } else if (keywordCategory === 'è´Ÿé¢è¯æ±‡') {
                        description = `
                            <div style="text-align: center;">
                                <div>ä¸–ç•Œå¦‚æ­¤ç¾å¦™ï¼Œå¹´è½»äººä¸è¦æš´èº</div>
                                <div>è®©å°ğŸ‘å­é€ä½ ä¸€æœµèŠ±ï¼Œå¹¶å¤§å£°å‘Šè¯‰ä½ </div>
                            </div>
                       `;
                    }
                } else {
                    description = "å°ğŸ‘å­é€ç»™" + userInput + "ä¸€æŸ" + randomFlower.name + "ï¼Œå¹¶å·å·å‘Šè¯‰ä½ ";
                }
            }
            document.getElementById('cardDescription').innerHTML = description;
            
            // æ˜¾ç¤ºåŠ è½½åŠ¨ç”»
            document.getElementById('questionCard').classList.add('hidden');
            document.getElementById('flowerCard').classList.remove('hidden');
            
            // åˆ›å»ºèŠ±ç“£é£˜è½æ•ˆæœ
            createPetals();
        }
        
        function resetCard() {
            document.getElementById('flowerCard').classList.add('hidden');
            document.getElementById('questionCard').classList.remove('hidden');
            document.getElementById('userInput').value = '';
            
            // æ¸…é™¤æ‰€æœ‰èŠ±ç“£
            const petals = document.querySelectorAll('.petal');
            petals.forEach(petal => petal.remove());
        }
        
        function createPetals() {
            const container = document.querySelector('.flower-container');
            const colors = ['var(--primary-color)', 'var(--secondary-color)', '#ffb6c1', '#ffdf80'];
            
            for(let i = 0; i < 15; i++) {
                const petal = document.createElement('div');
                petal.classList.add('petal');
                
                // éšæœºå¤§å°
                const size = Math.random() * 15 + 5;
                petal.style.width = `${size}px`;
                petal.style.height = `${size}px`;
                
                // éšæœºé¢œè‰²
                petal.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                
                // éšæœºä½ç½®
                petal.style.left = `${Math.random() * 100}%`;
                
                // éšæœºåŠ¨ç”»æ—¶é—´å’Œå»¶è¿Ÿ
                const duration = Math.random() * 5 + 3;
                petal.style.animationDuration = `${duration}s`;
                petal.style.animationDelay = `${Math.random() * 2}s`;
                
                container.appendChild(petal);
            }
        }
    </script>
</body>
</html>